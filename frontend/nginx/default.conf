server {
    # Nginx будет слушать порт 80
    listen 80;

    # Для всех запросов, начинающихся с / (т.е. для всех)
    location / {
        # Корневая папка, где лежат наши файлы
        root   /usr/share/nginx/html;
        # Файл по умолчанию, если путь не указан
        index  index.html index.htm;
        # Важно для React/Vue/Angular роутинга в будущем.
        # Если файл не найден, возвращать index.html
        try_files $uri /index.html;
    }

    # "Волшебный" блок для нашего API
    # Для всех запросов, которые начинаются с /api/
    location /api/ {
        # Перенаправляем запрос на наш бэкенд-сервис.
        # Docker Compose автоматически создаст внутреннюю сеть,
        # где сервис 'backend' будет доступен по этому имени.
        proxy_pass http://backend:3000;
    }
}